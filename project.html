<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Disaster Alert and Evacuation Route Planner</title>
    <link rel="website icon" type="png" href="logo.png">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="project.css">
</head>
<style>
    .additional-cards-section {
        padding: 2rem;
        background-color: var(--body-bg);
        text-align: center;
    }

    .additional-cards-section h2 {
        color: var(--heading-color);
        margin-bottom: 2rem;
        font-size: 2em;
    }

    .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .info-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--card-shadow);
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .info-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--hover-shadow);
    }

    .card-icon {
        font-size: 3rem;
        color: var(--accent-color);
        margin-bottom: 1rem;
    }

    .info-card h3 {
        color: var(--heading-color);
        margin-bottom: 1rem;
        font-size: 1.5em;
    }

    .info-card ul {
        list-style: none;
        padding: 0;
        margin: 0 0 1rem 0;
        width: 100%;
    }

    .info-card ul li {
        color: var(--text-primary);
        padding: 0.3rem 0;
        font-size: 0.95em;
    }

    .info-card strong {
        color: var(--accent-color);
    }

    .info-card p {
        color: var(--text-secondary);
        margin-bottom: 1rem;
        flex-grow: 1;
    }

    .card-button {
        background-color: #0275d8;
        color: var(--body-bg);
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1em;
        font-weight: bold;
        transition: background-color 0.3s ease, transform 0.2s ease;
        margin-top: auto;
    }

    .card-button:hover {
        background-color: #025aa2;
        transform: translateY(-2px);
    }

    .advisory-list li {
        display: flex;
        align-items: center;
        gap: 10px;
        text-align: left;
        margin-bottom: 0.5rem;
    }

    .advisory-tag {
        font-size: 0.7em;
        padding: 0.2em 0.5em;
        border-radius: 3px;
        font-weight: bold;
        color: white;
    }

    .advisory-tag.critical {
        background-color: #e74c3c;
    }

    .advisory-tag.high-risk {
        background-color: #f39c12;
    }

    .advisory-tag.info {
        background-color: #3498db;
    }

    .checklist li {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 10px;
        color: var(--text-primary);
    }

    .checklist li .fas.fa-check-circle {
        color: var(--accent-color);
        font-size: 1.1em;
    }

    @media (max-width: 768px) {
        .cards-grid {
            grid-template-columns: 1fr;
        }
    }

    ul.example-2 {
        list-style: none;
        display: flex;
        justify-content: center;
        padding: 0;
    }

    .example-2 .icon-content {
        margin: 0 10px;
        position: relative;
    }

    .example-2 .icon-content .tooltip {
        position: absolute;
        top: -30px;
        left: 50%;
        transform: translateX(-50%);
        color: #fff;
        padding: 6px 10px;
        border-radius: 5px;
        opacity: 0;
        visibility: hidden;
        font-size: 14px;
        transition: all 0.3s ease;
    }

    .example-2 .icon-content:hover .tooltip {
        opacity: 1;
        visibility: visible;
        top: -50px;
    }

    .example-2 .icon-content a {
        position: relative;
        overflow: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        color: #4d4d4d;
        background-color: #fff;
        transition: all 0.3s ease-in-out;
    }

    .example-2 .icon-content a:hover {
        box-shadow: 3px 2px 45px 0px rgb(0 0 0 / 12%);
    }

    .example-2 .icon-content a svg {
        position: relative;
        z-index: 1;
        width: 30px;
        height: 30px;
    }

    .example-2 .icon-content a:hover {
        color: white;
    }

    .example-2 .icon-content a .filled {
        position: absolute;
        top: auto;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 0;
        background-color: #000;
        transition: all 0.3s ease-in-out;
    }

    .example-2 .icon-content a:hover .filled {
        height: 100%;
    }

    .example-2 .icon-content a[data-social="linkedin"] .filled,
    .example-2 .icon-content a[data-social="linkedin"]~.tooltip {
        background-color: #0274b3;
    }

    .example-2 .icon-content a[data-social="github"] .filled,
    .example-2 .icon-content a[data-social="github"]~.tooltip {
        background-color: #24262a;
    }

    .example-2 .icon-content a[data-social="instagram"] .filled,
    .example-2 .icon-content a[data-social="instagram"]~.tooltip {
        background: linear-gradient(45deg, #405de6, #5b51db, #b33ab4, #c135b4, #e1306c, #fd1f1f);
    }

    .example-2 .icon-content a[data-social="youtube"] .filled,
    .example-2 .icon-content a[data-social="youtube"]~.tooltip {
        background-color: #ff0000;
    }

    .footer-logo {
        max-height: 40px;
        margin-bottom: 1rem;
    }

    .newsletter-form {
        display: flex;
        margin-top: 1rem;
    }

    .newsletter-form input {
        flex-grow: 1;
        border: 1px solid var(--border-color);
        background: var(--card-bg);
        color: var(--text-primary);
        padding: 0.5rem;
        border-radius: 4px 0 0 4px;
        border-right: none;
    }

    .newsletter-form button {
        padding: 0.5rem 1rem;
        border: 1px solid var(--accent-color);
        background-color: var(--accent-color);
        color: var(--body-bg);
        border-radius: 0 4px 4px 0;
        cursor: pointer;
        font-weight: bold;
    }

    .footer-bottom {
        text-align: center;
        width: 100%;
        margin-top: 2rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border-color);
        font-size: 0.9rem;
    }
</style>

<body class="light-mode">
    <div id="page-content">
        <header>
            <h1><img src="1-removebg-preview.png" alt="RapidResQ Logo" class="logo"></h1>

            <ul id="nav-menu">
                <li><a href="#home" class="nav-animated-link selected">Home</a></li>
                <li><a href="toolkit.html" class="nav-animated-link">Toolkit</a></li>
                <li><a href="news.html" class="nav-animated-link">Latest News</a></li>
                <li><a href="support.html" class="nav-animated-link">Support</a></li>
                <li><a href="admin.html" class="nav-animated-link">Login</a></li>
                <li>
                    <button class="theme-toggle-button" id="theme-toggle" aria-label="Toggle theme">
                        <img src="https://img.icons8.com/ios-filled/50/FFFFFF/sun.png" alt="Sun Icon"
                            class="icon sun-icon">
                        <img src="https://img.icons8.com/ios-filled/50/8892B0/moon-symbol.png" alt="Moon Icon"
                            class="icon moon-icon">
                    </button>
                </li>
            </ul>
            <button class="mobile-nav-toggle" id="mobile-nav-toggle" aria-label="Open navigation menu">
                <i class="fas fa-bars"></i>
            </button>
        </header>
        <nav id="mobile-nav-menu">
            <button id="mobile-nav-close" aria-label="Close navigation menu">&times;</button>
            <ul>
                <li><a href="#home" class="nav-animated-link ">Home</a></li>
                <li><a href="toolkit.html" class="nav-animated-link">Toolkit</a></li>
                <li><a href="news.html" class="nav-animated-link">Latest News</a></li>
                <li><a href="support.html" class="nav-animated-link">Support</a></li>
                <li><a href="admin.html" class="nav-animated-link">Login</a></li>
            </ul>
        </nav>

        <main>
            <section id="home" class="view-section">
                <h2>Real-Time Monitoring Dashboard</h2>
                <p>This dashboard provides a live overview of disaster response metrics and system status.</p>

                <div class="dashboard-container">
                    <aside class="sidebar">
                        <h2 class="sidebar-title">System Overview</h2>
                        <div class="overview-cards">
                            <div class="card">
                                <div class="card-label">Active Alerts</div>
                                <div class="card-value-container">
                                    <div class="card-value alert-value">12</div>
                                    <i class="fas fa-exclamation-triangle alert-icon"></i>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-label">Evacuations</div>
                                <div class="card-value-container">
                                    <div class="card-value evacuation-value">3</div>
                                    <i class="fas fa-bullhorn evacuation-icon"></i>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-label">People Safe</div>
                                <div class="card-value-container">
                                    <div class="card-value people-safe-value">2,340</div>
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-label">Response Time</div>
                                <div class="card-value-container">
                                    <div class="card-value response-time-value">12 <span
                                            style="font-size: 16px; font-weight: normal;">min</span></div>
                                    <i class="fas fa-stopwatch"></i>
                                </div>
                            </div>
                        </div>
                        <div class="weather-card">
                            <h3 class="weather-title">Current Weather</h3>

                            <div class="city-selector">
                                <input type="text" id="city-input" placeholder="Enter City...">
                                <button id="change-city-btn" aria-label="Get weather for city">Go</button>
                            </div>

                            <div class="weather-info">
                                <div class="weather-item"><i class="fas fa-thermometer-half"></i> <span
                                        id="weather-temp">--°C</span></div>
                                <div class="weather-item"><i class="fas fa-tint"></i> <span
                                        id="weather-humidity">--%</span></div>
                                <div class="weather-item"><i class="fas fa-wind"></i> <span id="weather-wind">--
                                        km/h</span></div>
                                <div class="weather-item"><i class="fas fa-cloud-sun"></i> <span
                                        id="weather-desc">Loading...</span></div>
                            </div>
                            <div id="weather-error" class="weather-error-message"></div>
                        </div>
                        <div class="alert-content" id="alert-content">
                            <h2>Alert</h2>
                            <ul>
                                <li>Mumbai</li>
                                <li>delhi</li>
                                <li>surat</li>
                                <li>odisha</li>
                                <li>west bengal</li>
                                <li>tamil nadu</li>
                            </ul>
                        </div>
                    </aside>
                    <main class="main-content">
                        <nav class="main-nav">
                            <a href="#dashboard-map" class="nav-link active"><i
                                    class="fas fa-map-marked-alt"></i>Interactive Map</a>
                            <a href="#alert-content" class="nav-link "><i class="fas fa-bell"></i>Alerts</a>
                            <a href="#" class="nav-link"><i class="fas fa-route"></i>Routes</a>
                            <a href="#" class="nav-link"><i class="fas fa-clinic-medical"></i>Shelters</a>
                        </nav>
                        <div class="map-area">
                            <div id="dashboard-map"></div>
                            <div class="legend-box">
                                <h4>Legend</h4>
                                <ul>
                                    <li><span class="legend-color critical"></span> Critical Alert</li>
                                    <li><span class="legend-color high-risk"></span> High Risk</li>
                                    <li><span class="legend-color evacuation-route"></span> Evacuation Route</li>
                                    <li><span class="legend-color safe-shelter"></span> Safe Shelter</li>
                                </ul>
                            </div>
                            <div class="map-features-box">
                                <h4>Map Features:</h4>
                                <ul>
                                    <li>Real-time disaster locations</li>
                                    <li>Optimized evacuation routes</li>
                                    <li>Emergency shelter locations</li>
                                    <li>Traffic and road conditions</li>
                                </ul>
                            </div>
                        </div>
                    </main>
                </div>
            </section>
        </main>
        <main>
            <section class="view-section">
                <div>
                    <h2>Location</h2>
                </div>
                <div class="location_image">
                    <img src="location_image.jpg" alt="Something Error">
                    <p>
                        To provide you with the most accurate, life-saving information, our platform needs to know your
                        current location. Allowing access will instantly transform the map into your personalized guide,
                        showing you the closest shelters and calculating the safest evacuation routes from where you
                        stand right now. We are committed to your privacy and security; your location is only used
                        during your session to ensure your safety and is never shared or stored. Please click 'Allow' to
                        activate your personalized safety features and get the most relevant, real-time guidance.
                    </p>
                </div>
            </section>
        </main>
        <main>
            <section class="view-section">
                <div>
                    <h2>The Future is in Our Hands.</h2>
                </div>
                <div class="disaster_image1">
                    <p>
                        This is more than a slogan; it's our reality. We are at a critical moment where the threat of
                        natural disasters is growing, but so is our power to respond. Our mission is to place that power
                        directly into your hands. We provide the real-time alerts, intelligent mapping, and clear
                        evacuation routes you need to move from uncertainty to action.
                    </p>
                    <img src="disaster_image1.jpg" alt="Something Error">
                </div>
            </section>
        </main>
        <main>
            <section class="additional-cards-section view-section">
                <h2>Quick Resources</h2>
                <div class="cards-grid">
                    <div class="info-card">
                        <div class="card-icon"><i class="fas fa-phone-volume"></i></div>
                        <h3>Emergency Contacts</h3>
                        <ul>
                            <li>Police: <strong>100</strong></li>
                            <li>Fire: <strong>101</strong></li>
                            <li>Ambulance: <strong>102</strong></li>
                            <li>National Disaster: <strong>1078</strong></li>
                        </ul>
                        <button class="card-button">Call Local Services</button>
                    </div>
                    <div class="info-card">
                        <div class="card-icon"><i class="fas fa-box-open"></i></div>
                        <h3>Emergency Kit Checklist</h3>
                        <ul class="checklist">
                            <li><i class="fas fa-check-circle"></i> Water & Food</li>
                            <li><i class="fas fa-check-circle"></i> First Aid</li>
                            <li><i class="fas fa-check-circle"></i> Flashlight</li>
                            <li><i class="fas fa-check-circle"></i> Important Documents</li>
                        </ul>
                        <button class="card-button">Build Your Kit</button>
                    </div>

                    <div class="info-card">
                        <div class="card-icon"><i class="fas fa-hands-helping"></i></div>
                        <h3>Community Support</h3>
                        <p>Find help or offer assistance during a crisis.</p>
                        <button class="card-button">Connect with Community</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <footer>
        <div class="footer-bottom">
            <p>© 2025 Global Disaster Alert | Data sources include IMD & NDMA.</p>
            <p class="footer-disclaimer"><strong>Disclaimer:</strong> This is an informational tool. Always follow
                guidance from local emergency authorities.</p>
            <ul class="example-2" , id='symbol'>
                <li class="icon-content">
                    <a href="https://www.linkedin.com/in/shubham-padhy-467749355/" aria-label="LinkedIn"
                        data-social="linkedin">
                        <div class="filled"></div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-linkedin" viewBox="0 0 16 16" xml:space="preserve">
                            <path
                                d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"
                                fill="currentColor"></path>
                        </svg>
                    </a>
                    <div class="tooltip">LinkedIn</div>
                </li>
                <li class="icon-content">
                    <a href="https://www.github.com/" aria-label="GitHub" data-social="github">
                        <div class="filled"></div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-github" viewBox="0 0 16 16" xml:space="preserve">
                            <path
                                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"
                                fill="currentColor"></path>
                        </svg>
                    </a>
                    <div class="tooltip">GitHub</div>
                </li>
                <li class="icon-content">
                    <a href="https://www.instagram.com/__shubuu__1808/" aria-label="Instagram" data-social="instagram">
                        <div class="filled"></div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-instagram" viewBox="0 0 16 16" xml:space="preserve">
                            <path
                                d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"
                                fill="currentColor"></path>
                        </svg>
                    </a>
                    <div class="tooltip">Instagram</div>
                </li>
                <li class="icon-content">
                    <a href="https://youtube.com/" aria-label="Youtube" data-social="youtube">
                        <div class="filled"></div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-youtube" viewBox="0 0 16 16" xml:space="preserve">
                            <path
                                d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31 31 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A100 100 0 0 1 7.858 2zM6.4 5.209v4.818l4.157-2.408z"
                                fill="currentColor"></path>
                        </svg>
                    </a>
                    <div class="tooltip">Youtube</div>
                </li>
            </ul>
        </div>
    </footer>

    <script src="loader.js" defer></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            try {
                const navLinks = document.querySelectorAll('.main-nav .nav-link');
                const viewPanels = document.querySelectorAll('.main-view-panel');

                navLinks.forEach(link => {
                    link.addEventListener('click', (event) => {

                        const targetId = link.getAttribute('data-view');
                        const targetPanel = document.getElementById(targetId);

                        navLinks.forEach(nav => nav.classList.remove('active'));
                        viewPanels.forEach(panel => panel.classList.remove('active'));

                        link.classList.add('active');
                        if (targetPanel) {
                            targetPanel.classList.add('active');
                        }
                    });
                });
            } catch (e) {
                console.error("Could not initialize main content tabs:", e);
            }
            const themeToggleButton = document.getElementById('theme-toggle');
            const body = document.body;

            function applyTheme(theme) {
                body.className = theme + '-mode';
            }

            themeToggleButton.addEventListener('click', () => {
                const newTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
                applyTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            });

            let userMode = window.matchMedia('(prefers-color-scheme: dark)').matches ? "dark" : "light";
            applyTheme(userMode);

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (e.matches) {
                    applyTheme("dark");
                } else {
                    applyTheme("light");
                }
            });

            const mobileNavToggle = document.getElementById('mobile-nav-toggle');
            const mobileNavMenu = document.getElementById('mobile-nav-menu');
            const mobileNavClose = document.getElementById('mobile-nav-close');
            const mobileNavLinks = mobileNavMenu.querySelectorAll('a');

            function openMobileMenu() {
                mobileNavMenu.classList.add('active');
            }
            function closeMobileMenu() {
                mobileNavMenu.classList.remove('active');
            }

            mobileNavToggle.addEventListener('click', openMobileMenu);
            mobileNavClose.addEventListener('click', closeMobileMenu);
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', closeMobileMenu);
            });
            const weatherApiKey = 'ac4df7456197fbc04267210f5ebaa06f';

            const cityInput = document.getElementById('city-input');
            const changeCityBtn = document.getElementById('change-city-btn');
            const weatherError = document.getElementById('weather-error');
            const tempElement = document.getElementById('weather-temp');
            const humidityElement = document.getElementById('weather-humidity');
            const windElement = document.getElementById('weather-wind');
            const descElement = document.getElementById('weather-desc');

            function initializeWeather() {
                if ('geolocation' in navigator) {
                    weatherError.textContent = "Requesting your location permission...";
                    weatherError.className = 'weather-info-message';
                    navigator.geolocation.getCurrentPosition(handleLocationSuccess, handleLocationError);
                } else {
                    weatherError.textContent = "Geolocation is not supported. Please enter a city.";
                    weatherError.className = 'weather-error-message';
                    loadWeatherForCity(localStorage.getItem('weatherCity') || 'Mumbai');
                }
            }

            function handleLocationSuccess(position) {
                const { latitude, longitude } = position.coords;
                loadWeatherByCoordinates(latitude, longitude);
                initializeUserLocation(latitude, longitude);
            }

            function handleLocationError(error) {
                weatherError.className = 'weather-error-message';
                switch (error.code) {
                    case error.PERMISSION_DENIED:
                        weatherError.textContent = "Location access denied. Using default location.";
                        break;
                    case error.POSITION_UNAVAILABLE:
                        weatherError.textContent = "Location information is unavailable. Using default location.";
                        break;
                    case error.TIMEOUT:
                        weatherError.textContent = "Location request timed out. Using default location.";
                        break;
                    default:
                        weatherError.textContent = "An unknown error occurred. Using default location.";
                        break;
                }
                // Fallback to Mumbai if location fails
                loadWeatherForCity('Mumbai');
                initializeUserLocation(19.0760, 72.8777); // Mumbai coordinates
            }


            async function loadWeatherByCoordinates(lat, lon) {
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${weatherApiKey}&units=metric`;
                await fetchAndRenderWeather(apiUrl);
            }

            async function loadWeatherForCity(city) {
                const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${weatherApiKey}&units=metric`;
                await fetchAndRenderWeather(apiUrl);
            }

            async function fetchAndRenderWeather(apiUrl) {
                descElement.textContent = 'Loading...';
                weatherError.textContent = '';

                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) {
                        if (response.status === 404) {
                            weatherError.textContent = `City not found.`;
                        }
                        throw new Error(`API Error: ${response.status}`);
                    }
                    const data = await response.json();

                    tempElement.textContent = `${Math.round(data.main.temp)}°C`;
                    humidityElement.textContent = `${data.main.humidity}%`;
                    windElement.textContent = `${Math.round(data.wind.speed * 3.6)} km/h`;
                    descElement.textContent = data.weather[0].description.charAt(0).toUpperCase() + data.weather[0].description.slice(1);

                    cityInput.value = data.name;
                    localStorage.setItem('weatherCity', data.name);

                } catch (error) {
                    console.error("Weather Fetch Error:", error);
                    weatherError.className = 'weather-error-message';
                    if (!weatherError.textContent) {
                        weatherError.textContent = "Could not retrieve weather data.";
                    }
                }
            }

            changeCityBtn.addEventListener('click', () => {
                const newCity = cityInput.value.trim();
                if (newCity) {
                    loadWeatherForCity(newCity);
                }
            });

            cityInput.addEventListener('keyup', (event) => {
                if (event.key === 'Enter') {
                    changeCityBtn.click();
                }
            });

            initializeWeather();

            function initializeUserLocation(lat, lon) {
                try {
                    const startCoordinates = [20.5937, 78.9629];
                    const startZoom = 3;

                    const dashboardMap = L.map('dashboard-map').setView(startCoordinates, startZoom);

                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    }).addTo(dashboardMap);
                    dashboardMap.flyTo([lat, lon], 12, {
                        animate: true,
                        duration: 4
                    });
                    L.marker([lat, lon])
                        .addTo(dashboardMap)
                        .bindPopup('<b>Your Location</b><br>Active alert area.')
                        .openPopup();

                } catch (e) {
                    console.error("Could not initialize Leaflet map:", e);
                    document.getElementById('dashboard-map').innerHTML = "<p>Map could not be loaded.</p>";
                }
            }
            console.log(navigator);
        });
    </script>
</body>

</html>