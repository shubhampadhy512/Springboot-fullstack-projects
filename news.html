<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Disaster Alert and Evacuation Route Planner</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="project.css">
</head>
<style>
    marquee {
        height: 1.5rem;
        margin-top: 1rem;
    }

    .Notic {
        margin-right: 50px;
    }

    @keyframes scrollLeftRight {
        0% {
            transform: translateX(-100%);
        }

        100% {
            transform: translateX(100%);
        }
    }
</style>

<body>
    <div id="page-content">
        <header>
            <h1><img src="1-removebg-preview.png" alt="RapidResQ Logo" class="logo"></h1>

            <ul id="nav-menu">
                <li><a href="project.html" class="nav-animated-link">Home</a></li>
                <li><a href="toolkit.html" class="nav-animated-link">Toolkit</a></li>
                <li><a href="#news" class="nav-animated-link">Latest News</a></li>
                <li><a href="support.html" class="nav-animated-link">Support</a></li>
                <li><a href="admin.html" class="nav-animated-link">Login</a></li>
                <li>
                    <button class="theme-toggle-button" id="theme-toggle" aria-label="Toggle theme">
                        <img src="https://img.icons8.com/ios-filled/50/FFFFFF/sun.png" alt="Sun Icon"
                            class="icon sun-icon">
                        <img src="https://img.icons8.com/ios-filled/50/8892B0/moon-symbol.png" alt="Moon Icon"
                            class="icon moon-icon">
                    </button>
                </li>
            </ul>
            <button class="mobile-nav-toggle" id="mobile-nav-toggle" aria-label="Open navigation menu">
                <i class="fas fa-bars"></i>
            </button>
        </header>
        <nav id="mobile-nav-menu">
            <button id="mobile-nav-close" aria-label="Close navigation menu">&times;</button>
            <ul>
                <li><a href="project.html" class="nav-animated-link">Home</a></li>
                <li><a href="toolkit.html" class="nav-animated-link">Toolkit</a></li>
                <li><a href="#news" class="nav-animated-link">Latest News</a></li>
                <li><a href="support.html" class="nav-animated-link">Support</a></li>
                <li><a href="admin.html" class="nav-animated-link">Login</a></li>
            </ul>
        </nav>
        <main>
            <section>
                <marquee behavior="latest_news" direction="right" scrollamount="15" class="">
                    <span class="Notic"><em>LATEST NEWS HEADLINES </em></span>
                    <span class="Notic"><em> LATEST NEWS HEADLINES </em></span>
                    <span class="Notic"><em> LATEST NEWS HEADLINES </em> </span>
                </marquee>
            </section>
        </main>
        <main>
            <section id="news" class="view-section">
                <h2 data-i18n="latest_news">Latest News & Updates</h2>
                <p data-i18n="stay_informed">
                    Stay informed with the latest news and updates on global disaster events and preparedness
                    strategies.
                </p>
                <div id="news-feed" class="news-feed">
                </div>
            </section>
        </main>
    </div>
    <footer>
        <p>Â© 2025 Disaster Alert and Evacuation Route Planner</p>
    </footer>

    <script src="loader.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            const themeToggleButton = document.getElementById('theme-toggle');
            const body = document.body;

            function applyTheme(theme) {
                if (theme === 'light') {
                    body.classList.add('light-mode');
                    body.classList.remove('dark-mode');
                } else {
                    body.classList.add('dark-mode');
                    body.classList.remove('light-mode');
                }
            }
            themeToggleButton.addEventListener('click', () => {
                const newTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
                applyTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            });
            let userMode = window.matchMedia('(prefers-color-scheme: dark)').matches ? "dark" : "light";
            applyTheme(userMode);

            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                if (e.matches) {
                    applyTheme("dark");
                } else {
                    applyTheme("light");
                }
            });



            const mobileNavToggle = document.getElementById('mobile-nav-toggle');
            const mobileNavMenu = document.getElementById('mobile-nav-menu');
            const mobileNavClose = document.getElementById('mobile-nav-close');
            const mobileNavLinks = mobileNavMenu.querySelectorAll('a');

            function openMobileMenu() {
                mobileNavMenu.classList.add('active');
            }
            function closeMobileMenu() {
                mobileNavMenu.classList.remove('active');
            }

            mobileNavToggle.addEventListener('click', openMobileMenu);
            mobileNavClose.addEventListener('click', closeMobileMenu);
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', closeMobileMenu);
            });

            const apiKey = "pub_ce88bd3fdf4d4ad4840bf5d09fc38294";

            async function fetchIndiaDisasterNews() {
                try {
                    const response = await fetch(
                        `https://newsdata.io/api/1/news?apikey=${apiKey}&country=in&language=en&q=disaster OR flood OR cyclone OR earthquake OR landslide`
                    );
                    const data = await response.json();
                    renderNewsArticles(data.results);
                } catch (err) {
                    console.error("News Fetch Error:", err);
                    const feed = document.getElementById("news-feed");
                    feed.innerHTML = `<p>No live news available.</p>`;
                }
            }

            function renderNewsArticles(articles) {
                const container = document.getElementById("news-feed");
                container.innerHTML = ""; // Clear previous

                articles.slice(0, 5).forEach((article) => {
                    const el = document.createElement("div");
                    el.classList.add("news-card");
                    el.innerHTML = `
                        <h3><a href="${article.link}" target="_blank" rel="noopener">${article.title}</a></h3>
                        <p>${article.description || ""}</p>
                        <small>${new Date(article.pubDate).toLocaleDateString("en-IN")}</small>
                    `;
                    container.appendChild(el);
                });
            }

            fetchIndiaDisasterNews();
        });
    </script>
</body>

</html>